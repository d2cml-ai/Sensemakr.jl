var documenterSearchIndex = {"docs":
[{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"EditURL = \"<unknown>/jl/quickstart.jl\"","category":"page"},{"location":"quickstart/#Quickstart","page":"Quickstart","title":"Quickstart","text":"","category":"section"},{"location":"quickstart/#Introduction","page":"Quickstart","title":"Introduction","text":"","category":"section"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"In this quickstart, we demonstrate the basic usage of the package by reproducing Section 5 of Cinelli and Hazlett (2020), which estimates the effects of exposure to violence on attitudes towards peace, in Darfur. Throughout this manual, we mainly focus on the code. For detailed explanations, please refer to the original paper.","category":"page"},{"location":"quickstart/#Violence-in-Darfur","page":"Quickstart","title":"Violence in Darfur","text":"","category":"section"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"In 2003 and 2004, the Darfurian government orchestrated a horrific campaign of violence against civilians, killing an estimated two hundred thousand people. In this application, we are interested in answering the following question: did being directly exposed to harm make individuals more â€œangry,â€ and thus more likely to ask for revenge, or did it make them more \"weary,\" and thus more likely to ask for peace?","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Sensemakr comes with the Darfur dataset, which can be loaded with the command data.load_darfur(). More details about the data can be found in the documentation, as well as in Hazlett (2019) and Cinelli and Hazlett (2020).","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"# imports Sensemakr\nusing Sensemakr\n# loads darfur data\nusing DataFrames\ndarfur = load_darfur();\nfirst(darfur, 5)","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"<div><div style = \"float: left;\"><span>5Ã—14 DataFrame</span></div><div style = \"clear: both;\"></div></div><div class = \"data-frame\" style = \"overflow-x: scroll;\"><table class = \"data-frame\" style = \"margin-bottom: 6px;\"><thead><tr class = \"header\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">Row</th><th style = \"text-align: left;\">wouldvote</th><th style = \"text-align: left;\">peacefactor</th><th style = \"text-align: left;\">peace_formerenemies</th><th style = \"text-align: left;\">peace_jjindiv</th><th style = \"text-align: left;\">peace_jjtribes</th><th style = \"text-align: left;\">gos_soldier_execute</th><th style = \"text-align: left;\">directlyharmed</th><th style = \"text-align: left;\">age</th><th style = \"text-align: left;\">farmer_dar</th><th style = \"text-align: left;\">herder_dar</th><th style = \"text-align: left;\">pastvoted</th><th style = \"text-align: left;\">hhsize_darfur</th><th style = \"text-align: left;\">village</th><th style = \"text-align: left;\">female</th></tr><tr class = \"subheader headerLastRow\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\"></th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"InlineStrings.String31\" style = \"text-align: left;\">String31</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th></tr></thead><tbody><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">1</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">1.0</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">30</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">23</td><td style = \"text-align: left;\">Abdel Khair</td><td style = \"text-align: right;\">0</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">2</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0.706831</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">20</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">5</td><td style = \"text-align: left;\">Abdi Dar</td><td style = \"text-align: right;\">1</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">3</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">45</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">15</td><td style = \"text-align: left;\">Abu Sorog</td><td style = \"text-align: right;\">0</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">4</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">0.495178</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">55</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">9</td><td style = \"text-align: left;\">Abu Dejaj</td><td style = \"text-align: right;\">0</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0.0</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">25</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">7</td><td style = \"text-align: left;\">Abu Dejaj</td><td style = \"text-align: right;\">1</td></tr></tbody></table></div>","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"A natural approach for such problem is to run the following linear regression model, where we regress peacefactor on directlyharmed, further adjusting for village, female as well as other covariates. Here we run this regression using GLM","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"using GLM\nform = @formula(peacefactor ~ directlyharmed + age + farmer_dar + herder_dar + pastvoted + hhsize_darfur + female + village);\nfitted_model = lm(form, darfur);","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"The above regression results in the following estimate and standard errors for the coefficient of directlyharmed:","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"first(coeftable(fitted_model), 2)[2]","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"(Name = \"directlyharmed\", var\"Coef.\" = 0.09731581928495726, var\"Std. Error\" = 0.023256537809811153, t = 4.184449984808271, var\"Pr(>|t|)\" = 3.182339959789431e-5, var\"Lower 95%\" = 0.05166327477010026, var\"Upper 95%\" = 0.14296836379981426)","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"According to this model, those individual who were directly exposed to harm became on average more â€œpro-peace,â€ not less.","category":"page"},{"location":"quickstart/#Sensitivity-Analysis","page":"Quickstart","title":"Sensitivity Analysis","text":"","category":"section"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"The causal interpretation of the previous estimate, however, relies on the assumption that village and gender are sufficient for control of confoundingâ€”in other words, it requires the assumption of no unobserved confounders. What if is wrong? How strong would these unobserved variables have to be in order to change the original research conclusions? The goal of Sensemakr is precisely that, i.e, to make it easier to understand the impact that omitted variables would have on a regression result.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"The main function of the package is the function sensemakr. The sensemakr function defines an object of type sensemakr, performing the most commonly required sensitivity analyses which can then be further explored with the summary and plot methods of the object. This function is mainly a convenience wrapper for other sensitivity functions defined in the package, which can also be called directly, as we detail later in the documentation.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"In the code chunk below, we apply the function sensemakr to our OLS model from statsmodel.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"darfur_sense = sensemakr(fitted_model, \"directlyharmed\", benchmark_covariates = \"female\", kd = [1, 2, 3], ky = [1, 2, 3], q = 1.0, alpha = 0.05, reduce = true);","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"The main arguments of the call are:","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"model: the OLS model with the outcome regression. In our case, darfur_model.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"treatment: the name of the treatment variable. In our case, \"directlyharmed\".","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"benchmark_covariates: the names of covariates that will be used to bound the plausible strength of the unobserved confounders. Here, we put \"female\", which is arguably one of the main determinants of exposure to violence, and also a strong determinant of attitudes towards peace.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"kd and ky: these arguments parameterize how many times stronger the confounder is related to the treatment (kd) and to the outcome (ky) in comparison to the observed benchmark covariates (in this case, female). In our example, setting kd = [1, 2, 3] and ky = [1, 2, 3] means we want to investigate the maximum strength of a confounder once, twice, or three times as strong as female (in explaining treatment and outcome variation). If only kd is given, ky will be set equal to kd.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"q: fraction of the effect estimate that would have to be explained away to be problematic. Setting q = 1, means that a reduction of 100% of the current effect estimate, that is, a true effect of zero, would be deemed problematic. The default is 1.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"alpha: significance level of interest for statistical inference. The default is 0.05.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"reduce: should we consider confounders acting towards increasing or reducing the absolute value of the estimate? The default is reduce = true, which means we are considering confounders that pull the estimate towards (or through) zero.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Using the default arguments, one can simplify the previous call to:","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"darfur_sense = sensemakr(fitted_model, \"directlyharmed\", benchmark_covariates = \"female\", kd = [1, 2, 3]);","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Once we run sensemakr, we can now explore the sensitivity analysis results.","category":"page"},{"location":"quickstart/#Minimal-sensitivity-reporting","page":"Quickstart","title":"Minimal sensitivity reporting","text":"","category":"section"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"The print method of Sensemakr provides a quick review of the original (unadjusted) estimates along with three summary sensitivity statistics suited for routine reporting: the partial R^2 of the treatment with the outcome, the robustness value (RV) required to reduce the estimate entirely to zero (i.e. q=1), and the RV beyond which the estimate would no longer be statistically distinguishable from zero at the 0.05 level","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"print(darfur_sense)","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Sensitivity Analysis to Unobserved Confounding\n\nModel Formula: peacefactor ~ 1 + directlyharmed + age + farmer_dar + herder_dar + pastvoted + hhsize_darfur + female + village\n\nNull hypothesis: q = 1.0 and reduce = true\n\nUnadjusted Estimates of \"directlyharmed\":\n   Coef. Estimate: 0.097\n   Standard Error: 0.023\n   t-value: 4.184\n\nSensitivity Statistics:\n   Partial R2 of treatment with outcome: 0.022\n   Robustness Value, q = 1.0: 0.139\n   Robustness Value, q = 1.0 alpha = 0.05: 0.076\n\n","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"The package also provides a function that outputs code for a latex or html table with these results. If used in an interactive environment, such as a Jupyter notebook, the table is also automatically displayed in the notebook.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"# html code for minimal reporting table\novb_minimal_reporting(darfur_sense)","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"<table style = 'align:center'>\n<thead\n<tr>\t<th style='text-align:center;border-bottom: 1px solid black;border-top: 1px solid black> </th>\n\t<th colspan = 6 style='text-align:center;border-bottom: 1px solid black; border-top: 1px solid black'> Outcome: peacefactor</tr>\n</tr>\n<tr>\n\t<th style='text-align:left;border-top: 1px solid black'> Treatment </th>\n\t<th style='text-align:right;border-top: 1px solid black'> Est. </th>\n\t<th style='text-align:right;border-top: 1px solid black'> S.E. </th>\n\t<th style='text-align:right;border-top: 1px solid black'> t-value </th>\n\t<th style='text-align:right;border-top: 1px solid black'> R<sup>2</sup><sub>Y~D|X</sub> </th>\n\t<th style='text-align:right;border-top: 1px solid black'> RV<sub>q = 1.0</sub> </th>\n\t<th style='text-align:right;border-top: 1px solid black'> RV<sub>q = 1.0, &alpha; = 0.05</sub> </th>\n</tr>\n</thead>\n<tbody>\n <tr> \n\t<td style 'text-alighn:left;border-bottom: 1px solid black'><i>directlyharmed</i></td>\n\t<td style='text-align:right;border-bottom: 1px solid black'>0.097 </td>\n\t<td style='text-align:right;border-bottom: 1px solid black'>0.023 </td>\n\t<td style='text-align:right;border-bottom: 1px solid black'>4.184 </td>\n\t<td style='text-align:right;border-bottom: 1px solid black'>2.2% </td>\n\t<td style='text-align:right;border-bottom: 1px solid black'>13.9% </td>\n\t<td style='text-align:right;border-bottom: 1px solid black'>7.6% </td>\n</tr>\n</tbody>\n<tr>\n<td colspan = 7 style='text-align:right;border-top: 1px solid black;border-bottom: 1px solid transparent;font-size:11px'>Note: df = 783; Bound ( 1.0x female ):  R<sup>2</sup><sub>Y~Z|X,D</sub> =  12.5%, R<sup>2</sup><sub>D~Z|X</sub> =0.9%</td>\n</tr>\n</table>","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"These three sensitivity statistics provide a minimal reporting for sensitivity analysis. More precisely:","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"The robustness value for bringing the point estimate of directlyharmed exactly to zero (RV_q=1) is 13.9% . This means that unobserved confounders that explain 13.9% of the residual variance both of the treatment and of the outcome are sufficiently strong to explain away all the observed effect. On the other hand, unobserved confounders that do not explain at least 13.9% of the residual variance both of the treatment and of the outcome are not sufficiently strong to do so.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"The robustness value for testing the null hypothesis that the coefficient of directlyharmed is zero (RV_q=1 alpha = 005) falls to 7.6%. This means that unobserved confounders that explain 7.6% of the residual variance both of the treatment and of the outcome are sufficiently strong to bring the lower bound of the confidence interval to zero (at the chosen significance level of 5%). On the other hand, unobserved confounders that do not explain at least 7.6% of the residual variance both of the treatment and of the outcome are not sufficiently strong to do so.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Finally, the partial R^2 of directlyharmed with peacefactor means that, in an extreme scenario, in which we assume that unobserved confounders explain all of the left out variance of the outcome, these unobserved confounders would need to explain at least 2.2% of the residual variance of the treatment to fully explain away the observed effect.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"The lower corner of the table, further provides bounds on the strength of an unobserved confounder as strong as the observed covariate female, resulting in R^2_Ysim Zmid X D = 125 and R^2_Dsim Zmid X = 9. Since both of those are below the RV of 13.9%, we conclude confounders as strong as female, in explaining treatment and outcome variations, are not sufficiently strong to explain away the observed estimate.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Moreover, the bound of R^2_Dsim Zmid X = 9 is below the partial ğ‘…2 of the treatment with the outcome, R^2_Ysim Dmid X = 22, this means that even an extreme confounder explaining all residual variation of the outcome, and as strongly associated with the treatment as female would not be able to overturn the research conclusions.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"The summary function of Sensemakr produces verbose output similar to the text explanations above, so that researchers can directly cite or include such texts in their reports.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"summary(darfur_sense)","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Sensitivity Analysis to Unobserved Confounding\n\nModel Formula: peacefactor ~ 1 + directlyharmed + age + farmer_dar + herder_dar + pastvoted + hhsize_darfur + female + village\n\nNull hypothesis: q = 1.0 and reduce = true\n-- This means we are considering biases that reduce the absolute value of the current estimate\n-- The null hypothesis deemed problematic is H0:tau = 0.0\n\nUnadjusted Estimates of \"directlyharmed\":\n   Coef. Estimate: 0.097\n   Standard Error: 0.023\n   t-value: 4.184\n\nSensitivity Statistics:\n   Partial R2 of treatment with outcome: 0.022\n   Robustness Value, q = 1.0: 0.139\n   Robustness Value, q = 1.0 alpha = 0.05: 0.076\n\nVerbal interpretation of sensitivity statistics:\n\n-- Partial R2 of the treatment with the outcome: an extreme confounder (orthogonal to the covariates) that explains 100% of the residual variance of the outcome, would need to explain at least 2.187 % of the residual variance of the treatment to fully account for the observed estimated effect.\n\n-- Robustness Value, q = 1.0: unobserved confounders (orthogonal to the covariates) that of both the treatment and the outcome are strong enough to bring the point estimate to 0.0 (a bias of 100.0% of the original estimate). Conversely, unobserved confounders that do not explain more than 13.878% of the residual variance of both the treatment and the outcome are not strong enough to bring the point estimate to 0.0.\n\n-- Robustness Value,q = 1.0, alpha = 0.05: unobserved confounders (orthogonal to the covariates) that explain more than 7.626% of the residual variance of both the treatment and the outcome are strong enough to bring the estimate to a range where it is no longer 'statistically different' from 0.0 (a bias of 100.0% of the original estimate), at the significance level of alpha = 0.05. Conversely, unobserved confounders that do not explain more than7.626% of the residual varianceof both the treatment and the outcome are not strong enough to bring the estimate to a range where it is no longer 'statistically different' from 0.0, at the significance level of alpha = 0.05.\n\nBounds on omitted variable bias:\n--The table below shows the maximum strength of unobserved confounders with association with the treatment and the outcome bounded by a multiple of the observed explanatory power of the chosen benchmark covariate(s).\n\n3Ã—9 DataFrame\n Row â”‚ bound_label  r2dz_x      r2yz_dx   treatment       adjusted_estimate  adjusted_se  adjusted_t  adjusted_lower_CI  adjusted_upper_CI\n     â”‚ String       Float64     Float64   String          Float64            Float64      Float64     Float64            Float64\nâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n   1 â”‚ 1.0x female  0.00916429  0.124641  directlyharmed          0.0752203    0.0218733     3.4389          0.032283            0.118158\n   2 â”‚ 2.0x female  0.0183286   0.249324  directlyharmed          0.0529152    0.0203501     2.60025         0.012968            0.0928623\n   3 â”‚ 3.0x female  0.0274929   0.37405   directlyharmed          0.030396     0.0186701     1.62806        -0.00625328          0.0670453\n","category":"page"},{"location":"quickstart/#Sensitivity-contour-plots","page":"Quickstart","title":"Sensitivity contour plots","text":"","category":"section"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Using the plot method for sensemakr, we can further refine our sensitivity analysis by visually exploring the whole range of possible estimates that confounders with different strengths could cause.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Let us begin by examining contour plots for the point estimate.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"plot(darfur_sense)","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"(Image: Figure_1)","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"The horizontal axis shows the hypothetical residual share of variation of the treatment that unobserved confounding explains, R^2_Dsim Z bf X . The vertical axis shows the hypothetical partial R^2 of unobserved confounding with the outcome, R^2_Ysim Z bf X D. The contours show what would be the estimate for directlyharmed that one would have obtained in the full regression model including unobserved confounders with such hypothetical strengths. Note the plot is parameterized in way that hurts our preferred hypothesis, by pulling the estimate towards zeroâ€”the direction of the bias was set in the argument reduce = true of sensemakr().","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"The bounds on the strength of confounding, determined by the parameter kd = [1, 2, 3] in the call for sensemakr(), are also shown in the plot. Note that the plot reveals that the direction of the effect (positive) is robust to confounding once, twice or even three times as strong as the observed covariate female, although in this last case the magnitude of the effect is reduced to a third of the original estimate.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"We now examine the sensitivity of the t-value for testing the null hypothesis of zero effect. For this, it suffices to change the option sensitivity_of = \"t-value\".","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"plot(darfur_sense, sensitivity_of = \"t-value\")","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"(Image: Figure_2)","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"The plot reveals that, at the 5% significance level, the null hypothesis of zero effect would still be rejected given confounders once or twice as strong as female. However, by contrast to the point-estimate, accounting for sampling uncertainty now means that the null hypothesis of zero effect would not be rejected with the inclusion of a confounder three times as strong as female.","category":"page"},{"location":"quickstart/#Sensitivity-to-extreme-scenarios","page":"Quickstart","title":"Sensitivity to extreme scenarios","text":"","category":"section"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Sometimes researchers may be better equipped to make plausibility judgments about the strength of determinants of the treatment assignment mechanism, and have less knowledge about the determinants of the outcome. In those cases, sensitivity plots using extreme scenarios are a useful option. These are produced with the option plot_type = \"extreme\". Here one assumes confounding explains all or some large fraction of the residual variance of the outcome, then vary how strongly such confounding is hypothetically related to the treatment, to see how this affects the resulting point estimate.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"plot(darfur_sense, plot_type = \"extreme\")","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"(Image: Figure_3)","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"This extreme scenarios plot sets the association of confounders with the outcome to R^2_Ysim Z bf X D=100%, R^2_Ysim Z bf X D=75% and R^2_Ysim Z bf X D=50% (producing three separate curves). The bounds on the strength of association of a confounder once, twice or three times as strongly associated with the treatment as female are shown as red ticks in the horizontal axis. As the plot shows, even in the most extreme case of R^2_Ysim Z bf X D=100%, confounders would need to be more than twice as strongly associated with the treatment to fully explain away the point estimate. Moving to the scenarios R^2_Ysim Z bf X D=75% and R^2_Ysim Z bf X D=50%, confounders would need to be more than three times as strongly associated with the treatment as was female in order to fully explain away the point estimate.","category":"page"},{"location":"quickstart/#Going-further","page":"Quickstart","title":"Going further","text":"","category":"section"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"The basic functionality demonstrated here will likely suffice for most users, most of the time. Sometimes, however, more flexibility will be needed in a given project. When this happens, researchers may resort directly to the functions defined in the other modules of the package. Those functions can be found in the Modules documentation, and we also provide some examples of how they can be used in the next notebook.","category":"page"},{"location":"quickstart/#References","page":"Quickstart","title":"References","text":"","category":"section"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Cinelli, C. Hazlett, C. (2020) â€œMaking Sense of Sensitivity: Extending Omitted Variable Biasâ€. Journal of the Royal Statistical Society, Series B (Statistical Methodology).","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Hazlett, C. (2019). Angry or Weary? How Violence Impacts Attitudes toward Peace among Darfurian Refugees. Journal of Conflict Resolution.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"This page was generated using Literate.jl.","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"EditURL = \"<unknown>/jl/advanced_use.jl\"","category":"page"},{"location":"advanced_use/#Advanced-usage","page":"Advanced usage","title":"Advanced usage","text":"","category":"section"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"The standard functionality of the Sensemakr, demonstrated in the previous section, will suï¬ƒce for most users, most of the time. When needed, more ï¬‚exibility can be obtained by employing the sensitivity functions of the package directly, such as: (i) functions for sensitivity plots (ovb_contour_plot, ovb_extreme_plot); (ii) functions for computing bias-adjusted estimates and t-values (adjusted_estimate, adjusted_t); (iii) functions for computing the robustness value and partial R2 directly (robustness_value, partial_r2); and, (iv) functions for bounding the strength of unobserved confounders (ovb_bounds), among others. These functions are automatically imported when loading the package.","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"In this page we demonstrate how to use these functions in two examples.","category":"page"},{"location":"advanced_use/#The-risks-of-informal-benchmarking","page":"Advanced usage","title":"The risks of informal benchmarking","text":"","category":"section"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"Informal â€œbenchmarkingâ€ procedures have been widely suggested in the sensitivity analysis literature as a means to aid interpretation. It intends to describe how an unobserved confounder Z â€œnot unlikeâ€ some observed covariate X_j would alter the results of a study. Cinelli and Hazlett (2020) show why these proposals may lead users to erroneous conclusions, and offer formal bounds on the bias that could be produced by unobserved confounding â€œas strongâ€ as certain observed covariates.","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"Here we use Sensemakr to replicate the example in Section 6.1 of Cinelli and Hazlett (2020). This example provides a useful tutorial on how users can construct their own sensitivity contour plots with customized bounds, beyond what is offered by default on the package.","category":"page"},{"location":"advanced_use/#Simulating-the-data","page":"Advanced usage","title":"Simulating the data","text":"","category":"section"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"We begin by simulating the data generating process used in our example. Consider a treatment variable D, an outcome variable Y, one observed confounder X, and one unobserved confounder Z. Again, all disturbance variables U are standardized mutually independent gaussians, and note that, in reality, the treatment D has no causal effect on the outcome Y.","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"$","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"Z = Uz \\\nX = Ux \\\nD = X + Z + Ud \\\nY = X + Z + Uy $","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"Also note that, in this model: (i) the unobserved confounder Z is independent of X; and, (ii) the unobserved confounder Z is exactly like X in terms of its strength of association with the treatment and the outcome. The code below creates a sample of size 100 of this data generating process. We make sure to create residuals that are standardized and orthogonal so that all properties that we describe here will hold exactly even in this finite sample.","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"# loads GLM, DataFrames, and Statistics\nusing GLM, DataFrames, Statistics\n\n# defines function to simulate orthogonal residuals\nfunction resid_maker(n, df)\n    N = randn(n)\n    form = Term(:N) ~ sum(term.(propertynames(df)))\n    df[:, \"N\"] = N\n    model = lm(form, df)\n    e = residuals(model)\n    e = (e .- mean(e)) / std(e)\n    return e\nend;\n\n# simulates data\nn = 100;\nX = randn(n);\nX = (X .- mean(X)) / std(X);\nZ = resid_maker(n, DataFrame(x = X));\nD = X + Z + resid_maker(n, DataFrame(x = X, z = Z));\nY = X + Z + resid_maker(n, DataFrame(x = X, z = Z, d = D));","category":"page"},{"location":"advanced_use/#Fitting-the-model","page":"Advanced usage","title":"Fitting the model","text":"","category":"section"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"In this example, the investigator does not observe the confounder Z. Therefore, she is forced to fit the restricted linear model Y sim D + X, resulting in the following estimated values","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"# creates DataFrame with the data\ndf = DataFrame(Y = Y, X = X, Z = Z, D = D);\n\n# runs OLS\nmodel_ydx = lm(@formula(Y ~ D + X), df);\n\n# print OLS table\nprintln(coeftable(model_ydx))\n\n# print R2\nprintln(r2(model_ydx))","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n                   Coef.  Std. Error     t  Pr(>|t|)  Lower 95%  Upper 95%\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n(Intercept)  7.16094e-17   0.123731   0.00    1.0000  -0.245571   0.245571\nD            0.5           0.0879316  5.69    <1e-06   0.32548    0.67452\nX            0.5           0.152302   3.28    0.0014   0.197723   0.802277\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n0.5000000000000001\n","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"Note we obtain a large and statistically significant coefficient estimate of the effect of X on Y (05). However, we know that the variable Z is not observed, and there is the fear that this estimated effect is in fact due to the bias caused by Z. On the other hand, let us suppose the investigator correctly knows that: (i) Z and X have the same strength of association with D and Y; and, (ii) Z is independent of X. Can we leverage this information to understand how much bias a confounder Z â€œnot unlikeâ€ X could cause?","category":"page"},{"location":"advanced_use/#Informal-benchmarks","page":"Advanced usage","title":"Informal benchmarks","text":"","category":"section"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"Computing the bias due to the omission of Z requires two sensitivity parameters: its partial R^2 with the treatment D and its partial R^2 with the outcome Y. How could we go about computing the bias that a confounder Z â€œnot unlike Xâ€ would cause?","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"Intuitively, it seems that we could take as reference the observed partial R^2 of X with D and Y, and use those as the plausible values for the sensitivity parameters. So let us now compute those observed partial R^2 using the partial_r2(). For the partial R^2 of X with the treatment, we also need to fit a treatment regression D sim X first.","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"# load Sensemakr\nusing Sensemakr\n\n# fits treatment regression\nmodel_dx = lm(@formula(D ~ X), df);\n\n# computes partial R2 of X with D and Y\nr2dx = partial_r2(model = model_dx, covariates = \"X\");\nr2yx_d = partial_r2(model = model_ydx, covariates = \"X\");","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"Once both partial R^2 are computed, we can determine the implied adjusted estimate due to an unobserved confounder Z using the adjusted_estimate().","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"# computes adjusted estimate\ninformal_adjusted_estimate = adjusted_estimate(r2dx, r2yx_d, model = model_ydx, treatment = \"D\");","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"We can now plot the sensitivity contours with ovb_contour_plot() and add our informal benchmark with add_bound_to_contour().","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"# draws sensitivity contours\novb_contour_plot(model_ydx, \"D\", lim = 0.6)\n\n# adds informal benchmark\nadd_bound_to_contour(r2dx, r2yx_d, bound_value = informal_adjusted_estimate, bound_label = [\"Informal benchmark\"], label_bump_x = 0.6/30, label_bump_y = 0.6/30)","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"(Image: Figure_4)","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"As we can see, the results of the informal benchmark are different from what we expected. The informal benchmark point is still far away from zero, and this would lead an investigator to incorrectly conclude that an unobserved confounder Z â€œnot unlike Xâ€ is not sufficient to explain away the observed effect. Moreover, this incorrect conclusion occurs despite correctly assuming that: (i) Z and X have the same strength of association with D and Y; and, (ii) Z is independent of X. See Section 6.1 of Cinelli and Hazlett (2020) for details of why this happens.","category":"page"},{"location":"advanced_use/#Formal-Bounds","page":"Advanced usage","title":"Formal Bounds","text":"","category":"section"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"We now show how to compute formal bounds using the function ovb_bounds().","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"# computes formal bounds\nformal_bound = ovb_bounds(model_ydx, \"D\", benchmark_covariates = \"X\", kd = 1, ky = 1);","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"In this function we specify the linear model being used (model_ydx), the treatment of interest (D), the observed variable used for benchmarking (X), and how stronger Z is in explaining treatment (kd) and outcome (ky) variation, as compared to the benchmark variable X. We can now plot the proper bound against the informal benchmark.","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"# contour plot contrasting informal vs formal bounds\novb_contour_plot(model_ydx, \"D\", lim = 0.6)\nadd_bound_to_contour(r2dx, r2yx_d, bound_value = informal_adjusted_estimate, bound_label = [\"Informal benchmark\"], label_bump_x = 0.6/30, label_bump_y = 0.6/30)\nadd_bound_to_contour(formal_bound, bound_label = [\"Proper bound\"], label_bump_x = 0.6/30, label_bump_y = 0.6/30)","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"(Image: Figure_5)","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"Note that, using the formal bounds, the researcher now reaches the correct conclusion that, an unobserved confounder Z similar to X is strong enough to explain away all the observed association.","category":"page"},{"location":"advanced_use/#Manually-providing-input-data","page":"Advanced usage","title":"Manually providing input data","text":"","category":"section"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"We now demonstrate how to replicate the sensitivity analysis of the Darfur example (see Quickstart) without access to the microdata, using only usual statistics found in the regression tables. All results of the Darfur example, except the formal benchmark bounds as we explaim below, can be recoverded by simply providing: (i) the point estimate of directlyharmed (0097); (ii) its estimated standard error (0023); and, (iii) the degrees of freedom of the regression (783). This type of â€œmanualâ€ analysis can be useful when reading or reviewing papers that did not perform sensitivity.","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"# computes the robustness value\nrobustness_value(t_statistic = 0.097 / 0.023, dof = 783)","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"1-element Vector{Float64}:\n 0.1397867718266666","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"# computes the partial R2\npartial_r2(t_statistic = 0.097/0.023, dof = 783)","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"0.022211153497507175","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"# computes what the adjusted estimate would have been\n# after adjusting for confounders with strength r2dz_x = .1, r2yz_dx = 0.15\nadjusted_estimate(0.1, 0.15, estimate = 0.097, se = 0.023, dof = 783)","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"0.013912997406333186","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"# computes what the adjusted t-value would have been\n# after adjusting for confounders with strength r2dz_x = .1, r2yz_dx = 0.15\nadjusted_t(0.1, 0.15, estimate = 0.097, se = 0.023, dof = 783)","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"0.6220526656946492","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"# contour plot of the point estimate\novb_contour_plot(0.097, 0.023, 783)","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"(Image: Figure_6)","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"# contour plot of the t-value\novb_contour_plot(0.097, 0.023, 783, sensitivity_of = \"t-value\")","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"(Image: Figure_7)","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"# extreme plot\novb_extreme_plot(0.097, 0.023, 783)","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"(Image: Figure_8)","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"Finally, we show how users can compute bounds on the strength of confounding using only summary statistics, if the paper also provides a treatment regression table, i.e., a regression of the treatment on the observed covariates. Such regressions are sometimes shown in published works as part of efforts to describe the â€œdeterminantsâ€ of the treatment, or as â€œbalance testsâ€ in which the investigator assesses whether observed covariates predict treatment assigment. For the Darfur example, the regression coefficient and standard errors (in parenthesis) of female for the outcome and treatment equation are -0.097 (0.036) and -0.232 (0.024). With these, we can now compute the formal bounds as shown below.","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"# computes partial R2 based on t-value of female\nr2yxj_dx = partial_r2(t_statistic = -0.232 / 0.024, dof = 783);\nr2dxj_x  = partial_r2(t_statistic = -0.097 / 0.036, dof = 783);\n\n# computes bounds on the strength of Z if it were 1, 2 or 3 times as strong as female\nbounds   = ovb_partial_r2_bound(r2dxj_x = r2dxj_x, r2yxj_dx = r2yxj_dx, kd = [1, 2, 3], ky = [1, 2, 3], benchmark_covariates = \"female\")","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"<div><div style = \"float: left;\"><span>3Ã—3 DataFrame</span></div><div style = \"clear: both;\"></div></div><div class = \"data-frame\" style = \"overflow-x: scroll;\"><table class = \"data-frame\" style = \"margin-bottom: 6px;\"><thead><tr class = \"header\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">Row</th><th style = \"text-align: left;\">bound_label</th><th style = \"text-align: left;\">r2dz_x</th><th style = \"text-align: left;\">r2yz_dx</th></tr><tr class = \"subheader headerLastRow\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\"></th><th title = \"String\" style = \"text-align: left;\">String</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th></tr></thead><tbody><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">1</td><td style = \"text-align: left;\">1.0x female</td><td style = \"text-align: right;\">0.00927207</td><td style = \"text-align: right;\">0.121575</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">2</td><td style = \"text-align: left;\">2.0x female</td><td style = \"text-align: right;\">0.0185441</td><td style = \"text-align: right;\">0.243193</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">3</td><td style = \"text-align: left;\">3.0x female</td><td style = \"text-align: right;\">0.0278162</td><td style = \"text-align: right;\">0.364854</td></tr></tbody></table></div>","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"# computes adjusted estimate based on bounds\nbound_values = adjusted_estimate(bounds[:, \"r2dz_x\"], bounds[:, \"r2yz_dx\"], estimate = 0.0973, se = 0.0232, dof = 783);\n\n# draws contours\novb_contour_plot(0.097, 0.023, 783);\n\n# adds bounds\nadd_bound_to_contour(bounds, bound_value = bound_values, label_bump_x = 0.6/30, label_bump_y = 0.6/30)","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"(Image: Figure_9)","category":"page"},{"location":"advanced_use/#References","page":"Advanced usage","title":"References","text":"","category":"section"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"Cinelli, C. Hazlett, C. (2020) â€œMaking Sense of Sensitivity: Extending Omitted Variable Biasâ€. Journal of the Royal Statistical Society, Series B (Statistical Methodology). ( link )","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"","category":"page"},{"location":"advanced_use/","page":"Advanced usage","title":"Advanced usage","text":"This page was generated using Literate.jl.","category":"page"},{"location":"","page":"Home","title":"Home","text":"CurrentModule = Sensemakr","category":"page"},{"location":"#Sensemakr","page":"Home","title":"Sensemakr","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Documentation for Sensemakr, which implements a suite of sensitivity analysis tools that makes it easier to understand the impact of omitted variables in linear regression models, as discussed in Cinelli and Hazlett (2020).","category":"page"},{"location":"","page":"Home","title":"Home","text":"The Julia version of the package closely mirrors the R version, which can be found here.","category":"page"},{"location":"#Contents","page":"Home","title":"Contents","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Pages = [\n    \"quickstart.md\",\n    \"advanced_use.md\", \n    \"function_docs.md\"\n]\nDepth = 2","category":"page"},{"location":"function_docs/","page":"Object Documentation","title":"Object Documentation","text":"EditURL = \"<unknown>/jl/function_docs.jl\"","category":"page"},{"location":"function_docs/#Object-Documentation","page":"Object Documentation","title":"Object Documentation","text":"","category":"section"},{"location":"function_docs/#sensemakr-object","page":"Object Documentation","title":"sensemakr object","text":"","category":"section"},{"location":"function_docs/","page":"Object Documentation","title":"Object Documentation","text":"Sensitivity analysis to unobserved confounders.","category":"page"},{"location":"function_docs/","page":"Object Documentation","title":"Object Documentation","text":"The sensemakr type performs sensitivity analysis to omitted variables as discussed in Cinelli and Hazlett (2020). It is comprized of several sensitivity statistics for reporting. After creating the object, you may directly use the plot and summary methods of the returned object.","category":"page"},{"location":"function_docs/","page":"Object Documentation","title":"Object Documentation","text":"sensemakr is a convenience type. You may use the other sensitivity functions of the package directly, such as the functions for sensitivity plots (ovb_contour_plot, ovb_extreme_plot), the functions for computing bias-adjusted estimates and t-values (adjusted_estimate, adjusted_t), the functions for computing the robustness value and partial R^2 (robustness_value, partial_r2), or the functions for bounding the strength of unobserved confounders (ovb_bounds), among others.","category":"page"},{"location":"function_docs/","page":"Object Documentation","title":"Object Documentation","text":"Sensemakr.sensemakr","category":"page"},{"location":"function_docs/#Sensemakr.sensemakr","page":"Object Documentation","title":"Sensemakr.sensemakr","text":"Sensemakr.sensemakr\n\nObject comprised of necessary parameters and statistics for sensitivity analysis\n\n\n\n\n\n","category":"type"},{"location":"function_docs/","page":"Object Documentation","title":"Object Documentation","text":"summary(::sensemakr, ::Int64)","category":"page"},{"location":"function_docs/#Base.summary-Tuple{sensemakr, Int64}","page":"Object Documentation","title":"Base.summary","text":"Base.summary(sense_obj::sensemakr, digits::Int64 = 3)\n\nPrint a summary of the sensitivity results for sense_obj, including robustness value, extreme confounding scenario, and benchmark bounding.\n\nArguments:\n\nsense_obj: object to be summarized.\ndigits (default: 3): number of digits to round numbers to.\n\n\n\n\n\n","category":"method"},{"location":"function_docs/","page":"Object Documentation","title":"Object Documentation","text":"Sensemakr.plot","category":"page"},{"location":"function_docs/#Sensemakr.plot","page":"Object Documentation","title":"Sensemakr.plot","text":"Sensemakr.plot(sense_obj::sensemakr; kwargs...)\n\nProvide the contour and extreme scenario sensitivity plots of the sensitivity analysis results obtained with the function sensemakr\n\nThey are basically dispatchers to the core plot functions ovbcontourplot and ovbextremeplot\n\nArguments:\n\nsense_obj: object with the statistics to be plotted.\nplot_type (default: \"contour\"): Either \"extreme\" or \"contour\".\nsensitivity_of (default: \"estimate\"): Either \"estimate\" or \"t-value\"\n\n\n\n\n\n","category":"function"},{"location":"function_docs/","page":"Object Documentation","title":"Object Documentation","text":"Sensemakr.ovb_minimal_reporting","category":"page"},{"location":"function_docs/#Sensemakr.ovb_minimal_reporting","page":"Object Documentation","title":"Sensemakr.ovb_minimal_reporting","text":"ovb_minimal_reporting(sense_obj::sensemakr, digits::Int64 = 3, res_display::Bool = true)\n\nThis function returns the HTML code for a table summarizing the sensemakr object.\n\nArguments:\n\ndigits (default: 3): number of digits to round numbers to.\nres_display (default: true): whether to display the table.\n\n\n\n\n\n","category":"function"},{"location":"function_docs/#Plotting-functions","page":"Object Documentation","title":"Plotting functions","text":"","category":"section"},{"location":"function_docs/","page":"Object Documentation","title":"Object Documentation","text":"Sensemakr provides functions for creating sensitivity contour plots and extreme scenario sensitivity plots. They can be used on an object of class sensemakr, directly with an OLS StatsModels.TableRegressionModel object, or by providing the required statistics manually.","category":"page"},{"location":"function_docs/","page":"Object Documentation","title":"Object Documentation","text":"Sensemakr.ovb_contour_plot","category":"page"},{"location":"function_docs/#Sensemakr.ovb_contour_plot","page":"Object Documentation","title":"Sensemakr.ovb_contour_plot","text":"ovb_contour_plot(estimate::Float64, se::Float64, dof::Int64, kwargs...)\n\nContour plots of omitted variable bias for sensitivity analysis.\n\nThe horizontal axis of the plot shows hypothetical values of the partial R2 of the unobserved confounder(s) with the treatment. The vertical axis shows hypothetical values of the partial R2 of the unobserved confounder(s) with the outcome. The contour levels represent the adjusted estimates (or t-values) of the treatment effect.\n\nThe reference points are the bounds on the partial R2 of the unobserved confounder if it were k times â€œas strongâ€ as the observed covariates used for benchmarking (see arguments kd and ky). The dotted red line show the chosen critical threshold (for instance, zero): confounders with such strength (or stronger) are sufficient to invalidate the research conclusions. All results are exact for single confounders and conservative for multiple/nonlinear confounders.\n\nSee Cinelli and Hazlett (2020) for details.\n\nArguments:\n\nestimate: estimated parameter of the variable of interest\nse: standard error of the estimated parameter of the variable of interest\ndof degrees of freedom of the estimated regression model\nr2dz_x (default: nothing): number or array containing hypothetical partial R2 of unobserved confounder Z with treatment D, given covariates X.\nr2yz_dx (default: nothing): number or array containing hypothetical partial R2 of unobserved confounder Z with outcome Y, given covariates X and treatment D.\nsensitivity_of (default: \"estimate\"): either \"estimate\" or \"t-value\"\nkd (default: 1): a float or vector of floats with each being a multiple of the strength of association between a benchmark variable and the treatment variable to test with benchmark bounding.\nky (default: nothing): a float or vector of floats with each being a multiple of the strength of association between a benchmark variable and the treatment variable to test with benchmark bounding.\nbenchmark_covariates (default: nothing): a string or vector of strings with the names of the variables to use for benchmarking.\nbound_label (default: nothing): label of the bound variable.\nreduce (default: true): whether to reduce (true) or increase (false) the estimate due to putative confounding.\nestimate_threshold (default: 0): threshold line to emphasize when contours correspond to estimate.\nt_threshold (default: 2): threshold line to emphasize when contours correspond to t-value.\nlim (default: nothing): x axis maximum.\nlim_y (default: nothing): y axis maximum.\ncol_contour (default: \"black\"): color of contour lines.\ncol_thr_line (default: \"red\"): color of the threshold contour line.\nlabel_text (default: true): whether to include label text.\nlabel_bump_x (default: nothing): x axis position of label above 0.\nlabel_bump_y (default: nothing): y axis position of label above 0.\nplot_margin_fraction (default: 0.05): margin fraction added to the top of lim and lim_y.\nround_dig (default: 3): rounding digit of the display numbers.\nn_levels (default: nothing): maximum number of countours in the plot.\n\n\n\n\n\novb_contour_plot(model::StatsModels.TableRegressionModel, treatment::String, kwargs...)\n\nUses model and treatment to obtain the estimate, standard error, and degrees of freedom; it then dispatches them to the relevant method.\n\n\n\n\n\novb_contour_plot(sense_obj::sensemakr, kwargs...)\n\nExtracts the estimate, standard error, and degrees of freedom from sense_obj; it then dispatches them to the relevant method.\n\n\n\n\n\n","category":"function"},{"location":"function_docs/","page":"Object Documentation","title":"Object Documentation","text":"Sensemakr.add_bound_to_contour","category":"page"},{"location":"function_docs/#Sensemakr.add_bound_to_contour","page":"Object Documentation","title":"Sensemakr.add_bound_to_contour","text":"add_bound_to_contour(r2dz_x::Union{Real, Array{<:Real}}, r2yz_dx::Union{Real, Array{<:Real}; kwargs...}\n\nAdd bound label to the contour plot of omitted variable bias for sensitivity analysis.\n\nThe reference points are the bounds on the partial R2 of the unobserved confounder if it were k times \"as strong\" as the observed covariate used for benchmarking (see arguments kd and ky).\n\nArguments\n\nr2dz_x: partial R^2 of a putative unobserved confounder \"z\" with the treatment variable \"d\", with observed covariates \"x\" partialed out, as implied by z being kd-times as strong as the benchmark_covariates.\nr2yz_dx partial R^2 of a putative unobserved confounder \"z\" with the outcome variable \"y\", with observed covariates \"x\" and the treatment variable \"d\" partialed out, as implied by z being ky-times as strong as the benchmark_covariates.\nkd (default: 1): a float or vector of floats with each being a multiple of the strength of association between a benchmark variable and the treatment variable to test with benchmark bounding.\nky (default: nothing): same as kd except measured in terms of strength of association with the outcome variable.\nbound_value (default: nothing): the value of the reference point.\nbound_label (default: nothing): a string that label the reference point.\nsensitivity_of (default: nothing): either â€œestimateâ€ or â€œt-valueâ€.\nlabel_text (default: true): whether to include the label text.\nlabel_bump_x (default: nothing): x axis position of label above 0.\nlabel_bump_y (default: nothing): y axis position of label above 0.\nn_levels (default: nothing): maximum number of countours in the plot.\n\n\n\n\n\nadd_bound_to_contour(bound::DataFrame; kwargs...)\n\nExtracts r2dzx, r2yzdx, and bound_label vectors from bound and dispatches them to the relevant method.\n\n\n\n\n\n","category":"function"},{"location":"function_docs/","page":"Object Documentation","title":"Object Documentation","text":"Sensemakr.ovb_extreme_plot","category":"page"},{"location":"function_docs/#Sensemakr.ovb_extreme_plot","page":"Object Documentation","title":"Sensemakr.ovb_extreme_plot","text":"ovb_extreme_plot(estimate::Float64, se::Float64, dof::Int64; kwargs...)\n\nExtreme scenario plots of omitted variable bias for sensitivity analysis.\n\nThe horizontal axis shows the partial R2 of the unobserved confounder(s) with the treatment. The vertical axis shows the adjusted treatment effect estimate. The partial R2 of the confounder with the outcome is represented by different curves for each scenario, as given by the parameter r2yz_dx. The red marks on horizontal axis are bounds on the partial R2 of the unobserved confounder kd times as strong as the covariates used for benchmarking. The dotted red line represent the threshold for the effect estimate deemed to be problematic (for instance, zero).\n\nSee Cinelli and Hazlett (2020) for details.\n\nArguments:\n\nestimate: estimated parameter of the variable of interest\nse: standard error of the estimated parameter of the variable of interest\ndof degrees of freedom of the estimated regression model\nsensitivity_of (default: \"estimate\"): either \"estimate\" or \"t-value\". This function is currently only defined for \"estimate\"\nbenchmark_covariates (default: nothing): a string or vector of strings with the names of the variables to use for benchmarking.\nkd (default: 1): a float or vector of floats with each being a multiple of the strength of association between a benchmark variable and the treatment variable to test with benchmark bounding.\nky (default: nothing): a float or vector of floats with each being a multiple of the strength of association between a benchmark variable and the treatment variable to test with benchmark bounding.\nr2dz_x (default: nothing): a float or vector of floats with the partial R^2 of a putative unobserved confounder \"z\" with the treatment variable \"d\", with observed covariates \"x\" partialed out, as implied by z being kd-times as strong as the benchmark_covariates.\nr2yz_dx (default: [1.0, 0.75, 0.5]): a float or vector of floats with the partial R^2 of a putative unobserved confounder \"z\" with the outcome variable \"y\", with observed covariates \"x\" and the treatment variable \"d\" partialed out, as implied by z being ky-times as strong as the benchmark_covariates.\nreduce (default: true): whether to reduce (true) or increase (false) the estimate due to putative confounding.\nthreshold (default: 0): threshold line to emphasize when contours correspond to estimate.\nlim (default: nothing): x axis maximum.\nlim_y (default: nothing): y axis maximum.\nxlab (default: nothing): x axis label text.\nylab (default: nothing): y axis label text.\n\n\n\n\n\novb_extreme_plot(sense_obj::sensemakr; kwargs...)\n\nExtracts the estimate, standard error, and degrees of freedom from sense_obj; it then dispatches them to the relevant method.\n\n\n\n\n\n","category":"function"},{"location":"function_docs/","page":"Object Documentation","title":"Object Documentation","text":"","category":"page"},{"location":"function_docs/","page":"Object Documentation","title":"Object Documentation","text":"This page was generated using Literate.jl.","category":"page"}]
}
