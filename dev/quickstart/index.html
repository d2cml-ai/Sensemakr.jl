<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Quickstart · Sensemakr.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://d2cml-ai.github.io/Sensemakr.jl/quickstart/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Sensemakr.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Quickstart</a><ul class="internal"><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li><li><a class="tocitem" href="#Violence-in-Darfur"><span>Violence in Darfur</span></a></li><li><a class="tocitem" href="#Sensitivity-Analysis"><span>Sensitivity Analysis</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Quickstart</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Quickstart</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/d2cml-ai/Sensemakr.jl/blob/master/docs/src/quickstart.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Quickstart"><a class="docs-heading-anchor" href="#Quickstart">Quickstart</a><a id="Quickstart-1"></a><a class="docs-heading-anchor-permalink" href="#Quickstart" title="Permalink"></a></h1><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><p>In this quickstart, we demonstrate the basic usage of the package by reproducing Section 5 of Cinelli and Hazlett (2020), which estimates the effects of exposure to violence on attitudes towards peace, in Darfur. Throughout this manual, we mainly focus on the code. For detailed explanations, please refer to the original paper.</p><h2 id="Violence-in-Darfur"><a class="docs-heading-anchor" href="#Violence-in-Darfur">Violence in Darfur</a><a id="Violence-in-Darfur-1"></a><a class="docs-heading-anchor-permalink" href="#Violence-in-Darfur" title="Permalink"></a></h2><p>In 2003 and 2004, the Darfurian government orchestrated a horrific campaign of violence against civilians, killing an estimated two hundred thousand people. In this application, we are interested in answering the following question: did being directly exposed to harm make individuals more “angry,” and thus more likely to ask for revenge, or did it make them more &quot;weary,&quot; and thus more likely to ask for peace?</p><p><code>Sensemakr</code> comes with the Darfur dataset, which can be loaded with the command <code>data.load_darfur()</code>. More details about the data can be found in the documentation, as well as in Hazlett (2019) and Cinelli and Hazlett (2020).</p><pre><code class="language-julia hljs"># imports Sensemakr
julia&gt; using Sensemakr

# loads darfur data
julia&gt; using DataFrames

julia&gt; darfur = load_darfur();

julia&gt; first(darfur, 5)
5×14 DataFrame
 Row │ wouldvote  peacefactor  peace_formerenemies  peace_jjindiv  peace_jjtribes  gos_soldier_execute  directlyharmed ⋯
     │ Int64      Float64      Int64                Int64          Int64           Int64                Int64          ⋯
─────┼──────────────────────────────────────────────────────────────────────────────────────────────────────────────────
   1 │         0     1.0                         1              1               1                    0               0 ⋯
   2 │         0     0.706831                    0              1               1                    0               0
   3 │         1     0.0                         0              0               0                    1               0
   4 │         1     0.495178                    1              0               0                    0               1
   5 │         0     0.0                         0              0               0                    1               1 ⋯</code></pre><p>A natural approach for such problem is to run the following linear regression model, where we regress <code>peacefactor</code> on <code>directlyharmed</code>, further adjusting for <code>village</code>, <code>female</code> as well as other covariates. Here we run this regression using <code>GLM</code>.</p><pre><code class="language-julia hljs">julia&gt; using GLM

julia&gt; form = @formula(peacefactor ~ directlyharmed + age + farmer_dar + herder_dar + pastvoted + hhsize_darfur + female + village);

julia&gt; fitted_model = lm(form, darfur);</code></pre><p>The above regression results in the following estimate and standard errors for the coefficient of <code>directlyharmed</code>:</p><pre><code class="language-julia hljs">julia&gt; first(coeftable(fitted_model), 2)[2]
(Name = &quot;directlyharmed&quot;, var&quot;Coef.&quot; = 0.09731581928495726, var&quot;Std. Error&quot; = 0.023256537809811153, t = 4.184449984808271, var&quot;Pr(&gt;|t|)&quot; = 3.182339959789431e-5, var&quot;Lower 95%&quot; = 0.05166327477010026, var&quot;Upper 95%&quot; = 0.14296836379981426)</code></pre><p>According to this model, those individual who were directly exposed to harm became on average more “pro-peace,” not less.</p><h2 id="Sensitivity-Analysis"><a class="docs-heading-anchor" href="#Sensitivity-Analysis">Sensitivity Analysis</a><a id="Sensitivity-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Sensitivity-Analysis" title="Permalink"></a></h2><p>The causal interpretation of the previous estimate, however, relies on the assumption that <code>village</code> and <code>gender</code> are sufficient for control of confounding—in other words, it requires the assumption of no unobserved confounders. What if is wrong? How strong would these unobserved variables have to be in order to change the original research conclusions? The goal of <code>Sensemakr</code> is precisely that, i.e, to make it easier to understand the impact that omitted variables would have on a regression result.</p><p>The main function of the package is the function <code>sensemakr</code>. The <code>sensemakr</code> function defines an object of type <code>sensemakr</code>, performing the most commonly required sensitivity analyses which can then be further explored with the <code>summary</code> and <code>plot</code> methods of the object. This function is mainly a convenience wrapper for other sensitivity functions defined in the package, which can also be called directly, as we detail later in the documentation.</p><p>In the code chunk below, we apply the function <code>sensemakr</code> to our OLS model from statsmodel.</p><pre><code class="language-julia hljs"># creates a sensemakr object
julia&gt; darfur_sense = sensemakr(fitted_model, &quot;directlyharmed&quot;, benchmark_covariates = &quot;female&quot;, kd = [1, 2, 3], ky = [1, 2, 3], q = 1.0, alpha = 0.05, reduce = true);</code></pre><p>The main arguments of the call are:</p><p><strong>model</strong>: the OLS model with the outcome regression. In our case, <code>darfur_model</code>.</p><p><strong>treatment</strong>: the name of the treatment variable. In our case, &quot;directlyharmed&quot;.</p><p><strong>benchmark_covariates</strong>: the names of covariates that will be used to bound the plausible strength of the unobserved confounders. Here, we put &quot;female&quot;, which is arguably one of the main determinants of exposure to violence, and also a strong determinant of attitudes towards peace.</p><p><strong>kd</strong> and <strong>ky</strong>: these arguments parameterize how many times stronger the confounder is related to the treatment (kd) and to the outcome (ky) in comparison to the observed benchmark covariates (in this case, female). In our example, setting <code>kd = [1, 2, 3]</code> and ky = <code>[1, 2, 3]</code> means we want to investigate the maximum strength of a confounder once, twice, or three times as strong as female (in explaining treatment and outcome variation). If only <code>kd</code> is given, <code>ky</code> will be set equal to <code>kd</code>.</p><p><strong>q</strong>: fraction of the effect estimate that would have to be explained away to be problematic. Setting q = 1, means that a reduction of 100% of the current effect estimate, that is, a true effect of zero, would be deemed problematic. The default is 1.</p><p><strong>alpha</strong>: significance level of interest for statistical inference. The default is 0.05.</p><p><strong>reduce</strong>: should we consider confounders acting towards increasing or reducing the absolute value of the estimate? The default is <code>reduce = true</code>, which means we are considering confounders that pull the estimate towards (or through) zero.</p><p>Using the default arguments, one can simplify the previous call to:</p><pre><code class="language-julia hljs">julia&gt; darfur_sense = sensemakr(fitted_model, &quot;directlyharmed&quot;, benchmark_covariates = &quot;female&quot;, kd = [1, 2, 3]);</code></pre><p>Once we run <code>sensemakr</code>, we can now explore the sensitivity analysis results.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Tuesday 18 October 2022 00:16">Tuesday 18 October 2022</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
